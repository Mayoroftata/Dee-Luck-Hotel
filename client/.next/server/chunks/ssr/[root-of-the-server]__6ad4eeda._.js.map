{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///home/mayoroftata/Desktop/Projects/Dee%20Luck%20Hotel/client/src/app/booking/schema/page.js"],"sourcesContent":["import * as yup from \"yup\"\nconst match = /^\\d{10}$/\n\n\nexport const bookingSchema = yup.object().shape({\n    firstName: yup.string().required(\"Full name is required\"),\n    lastName: yup.string().required(\"Full name is required\"),\n    email: yup.string().email(\"Please enter a valid email\").required(\"Required\"),\n    phone: yup.string().matches(match, \"Phone number must be 11 digits\").required(\"Phone number is required\"),\n    arrival: yup.date().required(\"Arrival date is required\").min(new Date(), \"Arrival date must be today or later\"),\n    departure: yup.date().required(\"Departure date is required\").min(new Date())\n})\n//  I still need to work on the arrival and depature validation"],"names":[],"mappings":";;;AAAA;;AACA,MAAM,QAAQ;AAGP,MAAM,gBAAgB,mIAAA,CAAA,SAAU,GAAG,KAAK,CAAC;IAC5C,WAAW,mIAAA,CAAA,SAAU,GAAG,QAAQ,CAAC;IACjC,UAAU,mIAAA,CAAA,SAAU,GAAG,QAAQ,CAAC;IAChC,OAAO,mIAAA,CAAA,SAAU,GAAG,KAAK,CAAC,8BAA8B,QAAQ,CAAC;IACjE,OAAO,mIAAA,CAAA,SAAU,GAAG,OAAO,CAAC,OAAO,kCAAkC,QAAQ,CAAC;IAC9E,SAAS,mIAAA,CAAA,OAAQ,GAAG,QAAQ,CAAC,4BAA4B,GAAG,CAAC,IAAI,QAAQ;IACzE,WAAW,mIAAA,CAAA,OAAQ,GAAG,QAAQ,CAAC,8BAA8B,GAAG,CAAC,IAAI;AACzE,GACA,+DAA+D","debugId":null}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///home/mayoroftata/Desktop/Projects/Dee%20Luck%20Hotel/client/src/lib/Toast.js"],"sourcesContent":["'use client';\n\nimport { toast } from 'react-toastify';\n\nexport const showToast = () => {\n  const showToast = (message, type = 'success') => {\n    toast[type](message, {\n      position: toast.POSITION.TOP_RIGHT,\n    });\n  };\n\n  return { showToast };\n};"],"names":[],"mappings":";;;AAEA;AAFA;;AAIO,MAAM,YAAY;IACvB,MAAM,YAAY,CAAC,SAAS,OAAO,SAAS;QAC1C,mJAAA,CAAA,QAAK,CAAC,KAAK,CAAC,SAAS;YACnB,UAAU,mJAAA,CAAA,QAAK,CAAC,QAAQ,CAAC,SAAS;QACpC;IACF;IAEA,OAAO;QAAE;IAAU;AACrB","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///home/mayoroftata/Desktop/Projects/Dee%20Luck%20Hotel/client/src/app/booking/page.js"],"sourcesContent":["\"use client\";\nimport React, { useEffect } from \"react\";\nimport { useFormik } from \"formik\";\nimport { bookingSchema } from \"./schema/page\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { showToast } from \"@/lib/Toast\"; // assuming you have a toast utility\nimport { useAuth } from \"@/context/AuthContext\"; // assuming you have auth context\n\nconst CREATE_BOOKING = gql`\n  mutation CreateBooking($input: CreateBookingInput!) {\n    createBooking(input: $input) {\n      _id\n      guestFirstName\n        guestLastName\n      guestEmail\n    }\n  }\n`;\n\nconst Page = () => {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const roomId = searchParams.get(\"roomId\");\n  const { user, isAuthenticated } = useAuth(); // pull from auth context\n\n  const [createBooking, { loading }] = useMutation(CREATE_BOOKING);\n\n    console.log(\"user\", user);\n    \n  useEffect(() => {\n    if (!loading && !isAuthenticated) {\n      router.push(\"/login\");\n    }\n  }, [isAuthenticated, loading, router]);\n\n  const onSubmit = async (values, formikHelpers) => {\n    try {\n      const { data } = await createBooking({\n        variables: {\n          input: {\n            guestFirstName: values.firstName,\n            guestLastName: values.lastName,\n            guestEmail: values.email,\n            room: roomId,\n            checkIn: values.arrival,\n            checkOut: values.departure,\n            specialRequests: \"\", // you can add a field later\n          },\n        },\n      });\n\n      showToast(\"Booking successful!\", \"success\");\n      formikHelpers.resetForm();\n      router.push({\n        pathname: \"/booking-success\",\n        query: {\n            fullname: values.fullname,\n            email: values.email,\n            arrival: values.arrival,\n            departure: values.departure,\n        },\n    });\n    } catch (error) {\n      console.error(error);\n      showToast(\"Booking failed. Try again.\", \"error\");\n    }\n  };\n\n  const formik = useFormik({\n    initialValues: {\n      firstName: \"\",\n        lastName: \"\",\n      email: \"\",\n      phone: \"\",\n      arrival: \"\",\n      departure: \"\",\n    },\n    validationSchema: bookingSchema,\n    onSubmit,\n  });\n\n  const { values, errors, touched, handleChange, handleBlur, handleSubmit } =\n    formik;\n\n  if (loading) {\n    return <div>Loading...</div>; // Or your custom loader\n  }\n\n  return (\n    <div className=\"justify-center flex items-center  min-h-screen bg-blue-900\">\n      <div className=\"bg-white  w-full max-w-lg mx-6 border border-white/20 shadow rounded\">\n        <h1 className=\"text-center text-2xl font-bold text-blue-900 my-3\">\n          Hotel Booking\n        </h1>\n        <div className=\"px-5 pb-5 space-y-2\">\n          <form onSubmit={handleSubmit} className=\"space-y-2\">\n            {/* Full Name */}\n            <InputField\n              label=\"firstName*\"\n              name=\"firstName\"\n              value={values.firstName}\n              error={errors.firstName}\n              touched={touched.firstName}\n              onChange={handleChange}\n              onBlur={handleBlur}\n            />\n            <InputField\n              label=\"Last Name*\"\n              name=\"lastName\"\n              value={values.lastName}\n              error={errors.lastName}\n              touched={touched.lastName}\n              onChange={handleChange}\n              onBlur={handleBlur}\n            />\n\n            {/* Email */}\n            <InputField\n              label=\"Email address*\"\n              name=\"email\"\n              type=\"email\"\n              value={values.email}\n              error={errors.email}\n              touched={touched.email}\n              onChange={handleChange}\n              onBlur={handleBlur}\n            />\n\n            {/* Phone Number */}\n            <InputField\n              label=\"Phone Number*\"\n              name=\"phone\"\n              type=\"tel\"\n              value={values.phone}\n              error={errors.phone}\n              touched={touched.phone}\n              onChange={handleChange}\n              onBlur={handleBlur}\n            />\n\n            {/* Dates */}\n            <div className=\"flex space-x-3\">\n              <InputField\n                label=\"Arrival Date*\"\n                name=\"arrival\"\n                type=\"date\"\n                value={values.arrival}\n                error={errors.arrival}\n                touched={touched.arrival}\n                onChange={handleChange}\n                onBlur={handleBlur}\n              />\n              <InputField\n                label=\"Departure Date*\"\n                name=\"departure\"\n                type=\"date\"\n                value={values.departure}\n                error={errors.departure}\n                touched={touched.departure}\n                onChange={handleChange}\n                onBlur={handleBlur}\n              />\n            </div>\n\n            <div className=\"pt-1\">\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"font-bold rounded-lg text-white w-full bg-blue-900 py-2 hover:bg-blue-800\"\n              >\n                {loading ? \"Booking...\" : \"Book now\"}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Reusable Input Field Component\nconst InputField = ({\n  label,\n  name,\n  type = \"text\",\n  value,\n  error,\n  touched,\n  onChange,\n  onBlur,\n}) => (\n  <div className=\"w-full\">\n    <label className=\"text-blue-900 pb-1 font-medium block\" htmlFor={name}>\n      {label}\n    </label>\n    <input\n      name={name}\n      type={type}\n      value={value}\n      onChange={onChange}\n      onBlur={onBlur}\n      className={`p-1.5 w-full border rounded-lg focus:outline-none ${\n        error && touched ? \"border-red-500\" : \"border-gray-300 focus:border-blue-900\"\n      }`}\n    />\n    {error && touched && <p className=\"text-red-500 text-sm\">{error}</p>}\n  </div>\n);\n\nexport default Page;\n"],"names":[],"mappings":"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","debugId":null}}]
}